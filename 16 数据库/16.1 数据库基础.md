**设置mysql密码**

```
mysqladmin -u root password '123456'
```

注意：这是在未登录数据库的情况下使用。

**更新数据库密码**

```

```

**启动数据库**

```
mysql.server start
```

**关闭数据库**

```
mysql.server stop
```

**登录数据库**

```
mysql -u root -p
```

查看所有数据库

```
show databases;
```

**切换数据库**

```
use mysql;
```

**显示当前数据库中所有表**

```
show tables;
```

**退出数据库**

```
quit; 
-- 或者
exit;
```

**增删改查**

```
-- 创建数据库
create database mydb;
create database mytest charset=utf8;

-- 删除数据库
drop database mydb;

---创建数据表
create table person(id int primary key auto_increment, name varchar(20), gender bool, rmb float, word text);

-- 删除表
drop table person;

-- 插入数据
insert into person(name, gender, rmb) values("panshengneng", true, 9999.9);

-- 插入多条数据
insert into person(name, gender, rmb) 
    values
    ("xixi", false, 1119999.9),
    ("xiaoqiao", false, 888889999.9); 

-- 查询数据表
select * from person;
select name from person; -- 查询字段

-- 删除数据记录
delete from person where name="panshengneng";

-- 修改数据记录
update person set rmb="6666666" where name="xixi";
```

**单表复杂查询**

1. and, or
2. order by
3. limit
4. in
5. between
6. group by
7. having
8. like, not like
9. distinct

```
-----------------------------
-- and, or

select * from dis 
where (DisName not like "%区") and (DisName not like "%县");

-- 查询新疆和内蒙
select * from pro
where ProName like "%新疆%" or ProName like "%内蒙%"

-- 查询新疆和内蒙所有低级市
select * from city
where (ProID=12) or (ProID=34);

-----------------------------
-- order by, limit

-- 查询河北所有的地级市，按照cityID降序
select * from city where ProID=3
oeder by CityID desc;

-- 查询河北所有的地级市，按照cityID升序，取前5名
select * from city where ProID=3
oeder by CityID asc
limit 5;

-----------------------------
-- in,between

-- "青岛","昆明,"三亚,"大连,"威海,"苏州,"珠海,"厦门,"重庆,"深圳"
-- 查询广东的城市
select * from city
where 
Pro = (select Pro from pro where ProName="广东省")
and 
CityName in ("青岛","昆明,"三亚,"大连,"威海,"苏州,"珠海,"厦门,"重庆,"深圳")

-- 查询省份ID[10, 20]之间的省份
select * from pro
where
ProID bewween 10 in 20;

-----------------------------
-- group by, having
-- 统计函数 count, max, min, avg, sum

-- 查询中国各个省份有多少地级市
select Pro , count(CityID) from city
group by ProID;

-- 查询中国各自省份有多少地级市，降序，去前5名
  select ProID, count(CityID) as cities from city
  group by ProID
  order by cities desc
  limit 5;

-- 查询中国各自省份有多少地级市，取地级市超过10个的省份
select ProID, count(CityID) as cities from city
group by ProID
having cities > 10
order by cities desc;

-- 查询中国区县最多的10个城市
select CityID, count(Id) disCount from dis
group by CityID 
order by disCount desc
limit 10;

-- 查询中国区县最多的10个城市，打出城市名字
select * from city
where CityID in
(
  select temp.CityID from
  (
    select CityID, count(Id) disCount from dis
    group by CityID 
    order by disCount desc
    limit 10;
  )temp
);

-----------------------------
-- distinct
select distinct ProID from city;
```

**字段约束**

1. primary key, 主键，自带增长
2. not null, 不为空
3. default xxx， 默认约束
4. unique 唯一约束

```
crete table person(
 id int primary key auto_increment,
 name varchar(20) not null unique,
 age int default 0,
 rmb float default 0,
 sex bool ,
 word text,
 brithday data,
 brithdaytime datatime
);
```

注意：text 没有default



登陆数据库：

mysql -uroot –p

passwd



查看库列表：

show databases;



使用指定库

use test;



查看表列表

show tables;



查看表结构

desc customer;



清除表数据

truncate table customer;



创建数据库并设置字符集

create database test character set utf8;



修改数据库字符集

alter database test character set utf8;



Select:

SELECT Store\_Name FROM Store\_Information;



Distinct:

SELECT DISTINCT Store\_Name FROM Store\_Information;



Where:

SELECT Store\_Name 

FROM Store\_Information 

WHERE Sales &gt; 1000;



and or:

SELECT Store\_Name 

FROM Store\_Information 

WHERE Sales &gt; 1000 

OR \(Sales &lt; 500 AND Sales &gt; 275\);



In:

SELECT \* 

FROM Store\_Information 

WHERE Store\_Name IN \('Los Angeles', 'San Diego'\);



Between:

SELECT \* 

FROM Store\_Information 

WHERE Txn\_Date BETWEEN 'Jan-06-1999' AND 'Jan-10-1999';



Like:

SELECT \* 

FROM Store\_Information 

WHERE Store\_Name LIKE '%AN%';



order by:

SELECT Store\_Name, Sales, Txn\_Date 

FROM Store\_Information 

ORDER BY Sales DESC;



函数:

SELECT SUM\(Sales\) FROM Store\_Information;



Count:

SELECT COUNT \(Store\_Name\) 

FROM Store\_Information 

WHERE Store\_Name IS NOT NULL;



group by:

SELECT Store\_Name, SUM\(Sales\) 

FROM Store\_Information 

GROUP BY Store\_Name;



Having:

SELECT Store\_Name, SUM\(Sales\) 

FROM Store\_Information 

GROUP BY Store\_Name

HAVING SUM\(sales\) &gt; 1500;



Alias（别名）:

SELECT A1.Store\_Name Store, SUM\(A1.Sales\) 'Total Sales' 

FROM Store\_Information A1

GROUP BY A1.Store\_Name;



（左/内）连接:

SELECT A1.Region\_Name REGION, SUM\(A2.Sales\) SALES 

FROM Geography A1, Store\_Information A2 

WHERE A1.Store\_Name = A2.Store\_Name 

GROUP BY A1.Region\_Name;



外部连接：

SELECT A1.Store\_Name, SUM\(A2.Sales\) SALES 

FROM Georgraphy A1, Store\_Information A2 

WHERE A1.Store\_Name = A2.Store\_Name \(+\) 

GROUP BY A1.Store\_Name;



Subquery：

SELECT SUM\(Sales\) FROM Store\_Information

WHERE Store\_name IN

\(SELECT store\_name FROM Geography 

WHERE region\_name = 'West'\);



Union：

SELECT Txn\_Date FROM Store\_Information

UNION

SELECT Txn\_Date FROM Internet\_Sales;



union all：

SELECT Txn\_Date FROM Store\_Information

UNION ALL

SELECT Txn\_Date FROM Internet\_Sales;



Intersect：

SELECT Txn\_Date FROM Store\_Information

INTERSECT

SELECT Txn\_Date FROM Internet\_Sales;



Minus：

SELECT Txn\_Date FROM Store\_Information

MINUS

SELECT Txn\_Date FROM Internet\_Sales;



Concat：

SELECT CONCAT \(Region\_Name, Store\_Name\) FROM Geography 

WHERE Store\_Name = 'Boston';



Substring：

SELECT SUBSTR \(Store\_Name, 3\) 

FROM Geography 

WHERE Store\_Name = 'Los Angeles';





Trim：

SELECT TRIM\('   Sample   '\);

SELECT LTRIM\('   Sample   '\);

SELECT RTRIM\('   Sample   '\);



 

create table：

CREATE TABLE Customer

\(First\_Name char\(50\),

Last\_Name char\(50\),

Address char\(50\),

City char\(50\),

Country char\(25\),

Birth\_Date datetime\);



create view（视观表）：

CREATE VIEW V\_Customer

AS SELECT First\_Name, Last\_Name, Country

FROM Customer;



create index：

CREATE INDEX IDX\_CUSTOMER\_LAST\_NAME

ON Customer \(Last\_Name\);

CREATE INDEX IDX\_CUSTOMER\_LOCATION

ON Customer \(City, Country\);



alter table：

ALTER TABLE Customer ADD Gender char\(1\);

ALTER TABLE Customer DROP Gender;

ALTER TABLE Customer CHANGE Address Addr char\(50\);

ALTER TABLE Customer MODIFY Addr char\(30\);



 

主键：

CREATE TABLE Customer 

\(SID integer, 

Last\_Name varchar\(30\), 

First\_Name varchar\(30\), 

PRIMARY KEY \(SID\)\);

ALTER TABLE Customer ADD PRIMARY KEY \(SID\);



外键：

CREATE TABLE ORDERS 

\(Order\_ID integer, 

Order\_Date date, 

Customer\_SID integer, 

Amount double, 

PRIMARY KEY \(Order\_ID\), 

FOREIGN KEY \(Customer\_SID\) REFERENCES CUSTOMER \(SID\)\);

ALTER TABLE ORDERS 

ADD FOREIGN KEY \(Customer\_SID\) REFERENCES CUSTOMER \(SID\);



drop table：

DROP TABLE Customer;



truncate table：

TRUNCATE TABLE Customer;



insert into：

INSERT INTO Store\_Information \(Store\_Name, Sales, Txn\_Date\)

VALUES \('Los Angeles', 900, 'Jan-10-1999'\);

INSERT INTO Store\_Information \(Store\_Name, Sales, Txn\_Date\)

SELECT store\_name, Sales, Txn\_Date

FROM Sales\_Information

WHERE Year \(Txn\_Date\) = 1998;



Update：

UPDATE Store\_Information

SET Sales = 500

WHERE Store\_Name = 'Los Angeles' 

AND Txn\_Date = 'Jan-08-1999';



delete from：

DELETE FROM Store\_Information

WHERE Store\_Name = 'Los Angeles';

